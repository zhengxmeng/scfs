1、切换到Oracle用户

su – oracle

2、登录sys用户
sqlplus / as sysdba

3、创建表空间

查询用户表空间文件的路径
select name from v$datafile;

CREATE TABLESPACE scfs02 
LOGGING DATAFILE '/oracle/oradata/apdb/scfs02.dbf' 
SIZE 100M AUTOEXTEND ON NEXT 20M MAXSIZE 20480M EXTENT MANAGEMENT LOCAL;

4、创建临时表空间

select name from v$tempfile;

create temporary tablespace scfs02 
tempfile '/oracle/oradata/apdb/scfs02.dbf'
size 100m autoextend on next 20m maxsize 20480m extent management local;

5、创建用户密码与上面创建的文件形成映射关系

create user scfs02 identified by scfs02 default tablespace scfs02 temporary tablespace scfs02;

6、为用户添加权限

初始建立的用户没有任何权限，不能执行任何数据库操作，因此必须为用户设置权限或者角色。被赋予了某个角色的用户将拥有该角色所具备的权限，常被用到的系统预定义角色：CONNECT、RESOURCE、DBA、EXP_FULL_DATABASE、IMP_FULL_DATABASE。其中，CONNECT、RESOURCE、DBA主要用于数据库管理，数据库管理员需要被授予这三个角色。一般的数据库开发人员，需要被授予CONNECT、RESOURCE角色即可。EXP_FULL_DATABASE、IMP_FULL_DATABASE角色分别用于操作数据库导出、导入相关的操作。为用户授予角色：
grant connect,resource,dba to scfs02;



exp scfs/scfs@10.66.30.86/apdb tables=ST_QRTZ_JOB_DETAILS file=/home/scfs_oracle_bf/scfs/job.dmp 

imp scfs/scfs@10.66.220.37/apdb tables=ST_QRTZ_JOB_DETAILS file=/home/scfs_oracle_bf/scfs/job.dmp;


exp gd_base/11@192.168.13.211/oanet file=D:\export\gd_base.dmp log=D:\export\gd_base.log full=y
imp scfs02/scfs02@10.66.220.37/apdb file=/home/scfs_oracle_bf/scfs_2019_10_15.dmp fromuser=scfs touser=scfs02;
imp scfs/scfs@10.66.220.37/apdb file=/home/scfs_oracle_bf/scfs/scfs_2019_11_19.dmp fromuser=scfs touser=scfs;


grant dba to scfs02;
grant connect,resource to scfs01;
grant select any table to scfs01;
grant delete any table to scfs01;
grant update any table to scfs01;
grant insert any table to scfs01;

7、查询已创建的用户
select username from dba_users;

8、修改用户密码：

--将用户的密码设置为123456。
alter user scfs01 identified by scfs01;

有时用户会处于锁定状态，解锁用户：
alter user scfs01 account unlock;


9、删除用户语句：

--查询表空间
select tablespace_name from dba_tablespaces;

--查看用户和表空间的关系
select USERNAME,TEMPORARY_TABLESPACE from DBA_USERS;

--停止表空间的在线使用
alter tablespace 表空间名称 offline;
--删除用户
drop user scfs02 cascade;

alter tablespace scfs02 offline;
--删除表空间和文件
drop tablespace scfs02 including contents and datafiles;

--删除空的表空间，但是不包含物理文件
drop tablespace scfs02;
--删除非空表空间，但是不包含物理文件
drop tablespace tablespace_name including contents;
--删除空表空间，包含物理文件
drop tablespace scfs02 including datafiles; 
--删除非空表空间，包含物理文件
drop tablespace tablespace_name including contents and datafiles;
drop tablespace CUSTOMER including contents and datafiles cascade constraints;
--如果其他表空间中的表有外键等约束关联到了本表空间中的表的字段，就要加上CASCADE CONSTRAINTS
drop tablespace tablespace_name including contents and datafiles CASCADE CONSTRAINTS;



--查看system占用率

select b.file_name 物理文件名,b.tablespace_name 表空间,b.bytes/1024/1024 大小M,(b.bytes-sum(nvl(a.bytes,0)))/1024/1024 已使用M,
substr((b.bytes-sum(nvl(a.bytes,0)))/(b.bytes)*100,1,5) 利用率 from dba_free_space a,dba_data_files b where a.file_id=b.file_id group by b.tablespace_name,b.file_name,b.bytes order by b.tablespace_name


--修改
ALTER TABLESPACE SYSTEM ADD DATAFILE '/oracle/oradata/apdb/system01.dbf' SIZE 200M

  AUTOEXTEND ON

  NEXT 1024M

  MAXSIZE 8192M;